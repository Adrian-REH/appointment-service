package app.appointment.service.utils.mail;

import lombok.AllArgsConstructor;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;
import org.springframework.stereotype.Service;

import javax.mail.*;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.mail.search.SearchTerm;
import javax.mail.search.SubjectTerm;
import java.io.File;
import java.io.IOException;
import java.util.Properties;


@Service
@AllArgsConstructor
public class AsyncMailService {

    private final JavaMailSender mailSender;


    public static String licenseTrialPeriodActiveEmail() {

        //var msg = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"> <html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\"> <head> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"format-detection\" content=\"telephone=no\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <title>LICENCIA DE ATM</title> <style type=\"text/css\" emogrify=\"no\">#outlook a{padding:0;}.ExternalClass{width:100%;}.ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div{line-height: 100%;}table td{border-collapse: collapse; mso-line-height-rule: exactly;}.editable.image{font-size: 0 !important; line-height: 0 !important;}.nl2go_preheader{display: none !important; mso-hide:all !important; mso-line-height-rule: exactly; visibility: hidden !important; line-height: 0px !important; font-size: 0px !important;}body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;}img{outline:none; text-decoration:none; -ms-interpolation-mode: bicubic;}a img{border:none;}table{border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt;}th{font-weight: normal; text-align: left;}*[class=\"gmail-fix\"]{display: none !important;}</style> <style type=\"text/css\" emogrify=\"no\"> @media (max-width: 600px){.gmx-killpill{content: ' \\03D1';}}</style> <style type=\"text/css\" emogrify=\"no\">@media (max-width: 600px){.gmx-killpill{content: ' \\03D1';}.r0-c{box-sizing: border-box !important; width: 100% !important}.r1-o{border-style: solid !important; width: 100% !important}.r2-i{background-color: #082c4e !important}.r3-c{box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 320px !important}.r4-o{border-style: solid !important; margin: 0 auto 0 auto !important; width: 320px !important}.r5-i{padding-bottom: 30px !important; padding-top: 40px !important}.r6-c{box-sizing: border-box !important; display: block !important; valign: top !important; width: 100% !important}.r7-i{padding-left: 0px !important; padding-right: 0px !important}.r8-c{box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 53px !important}.r9-o{border-style: solid !important; margin: 0 auto 0 auto !important; width: 53px !important}.r10-c{box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 100% !important}.r11-o{border-style: solid !important; margin: 0 auto 0 auto !important; width: 100% !important}.r12-i{background-color: #ffffff !important; padding-bottom: 0px !important; padding-left: 10px !important; padding-right: 10px !important; padding-top: 20px !important}.r13-c{box-sizing: border-box !important; text-align: left !important; valign: top !important; width: 100% !important}.r14-o{border-style: solid !important; margin: 0 auto 0 0 !important; width: 100% !important}.r15-i{text-align: left !important}.r16-c{box-sizing: border-box !important; text-align: center !important; width: 100% !important}.r17-i{padding-top: 15px !important}.r18-i{background-color: #ffffff !important; padding-bottom: 0px !important; padding-left: 10px !important; padding-right: 10px !important; padding-top: 25px !important}.r19-i{background-color: #ffffff !important; padding-bottom: 0px !important; padding-left: 10px !important; padding-right: 10px !important; padding-top: 15px !important}.r20-c{box-sizing: border-box !important; valign: top !important; width: 8.33% !important}.r21-c{box-sizing: border-box !important; text-align: center !important; valign: top !important; width: 9px !important}.r22-o{border-style: solid !important; margin: 0 auto 0 auto !important; width: 9px !important}.r23-i{padding-top: 11px !important}.r24-c{box-sizing: border-box !important; valign: top !important; width: 91.67% !important}.r25-i{padding-left: 0px !important; text-align: left !important}.r26-i{background-color: #ffffff !important; padding-bottom: 0px !important; padding-left: 10px !important; padding-right: 10px !important; padding-top: 10px !important}.r27-i{background-color: #ffffff !important; padding-bottom: 25px !important; padding-left: 10px !important; padding-right: 10px !important; padding-top: 25px !important}.r28-i{padding-top: 15px !important; text-align: left !important}.r29-i{padding-top: 11px !important; text-align: left !important}.r30-i{padding-bottom: 30px !important; padding-left: 10px !important; padding-right: 10px !important; padding-top: 25px !important}.r31-i{text-align: center !important}.r32-i{font-size: 0px !important; padding-left: 90px !important; padding-right: 90px !important; padding-top: 15px !important}.r33-c{box-sizing: border-box !important; width: 32px !important}.r34-o{border-style: solid !important; margin-right: 8px !important; width: 32px !important}.r35-i{padding-bottom: 5px !important; padding-top: 5px !important}.r36-i{padding-top: 30px !important; text-align: center !important}body{-webkit-text-size-adjust: none}.nl2go-responsive-hide{display: none}.nl2go-body-table{min-width: unset !important}.mobshow{height: auto !important; overflow: visible !important; max-height: unset !important; visibility: visible !important; border: none !important}.resp-table{display: inline-table !important}.magic-resp{display: table-cell !important}}</style> <style type=\"text/css\" emogrify=\"no\">@import url(\"https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Mr+Dafoe&family=Quicksand:wght@500;700&display=swap\"); @import url(\"https://fonts.googleapis.com/css2?family=Source Sans Pro\"); </style> <style type=\"text/css\">p, h1, h2, h3, h4, ol, ul{margin: 0;}a, a:link{color: #404F5E; text-decoration: none}.nl2go-default-textstyle{color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45}.default-button{color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; font-style: normal; font-weight: normal; line-height: 1.15; text-decoration: none; width: 50%}.sib_class_16_white_reg_u{color: #FFFFFF; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 16px; text-decoration: underline}.sib_class_18_white_reg{color: #FFFFFF; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 18px}.sib_class_18_white_quicksand_m_up{color: #FFFFFF; font-family: Quicksand, Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase}.sib_class_20_darkblue_reg_u{color: #404F5E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; text-decoration: underline}.sib_class_20_black_reg{color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px}.sib_class_20_black_b{color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; font-weight: 700}.sib_class_26_black_quicksand_b{color: #3E3E3E; font-family: Quicksand, Helvetica, Arial, sans-serif; font-size: 26px; font-weight: 700; letter-spacing: 0.1em}.sib_class_32_black_mrdafoe_reg{color: #3E3E3E; font-family: Mr Dafoe, Helvetica, Arial, sans-serif; font-size: 32px}.default-heading1{color: #3e3e3e; font-family: Quicksand, Helvetica, Arial, sans-serif; font-size: 26px; font-weight: 700; letter-spacing: 0.1em}.default-heading2{color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 32px}.default-heading3{color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 24px}.default-heading4{color: #1F2D3D; font-family: arial,helvetica,sans-serif; font-size: 18px}a[x-apple-data-detectors]{color: inherit !important; text-decoration: inherit !important; font-size: inherit !important; font-family: inherit !important; font-weight: inherit !important; line-height: inherit !important;}.no-show-for-you{border: none; display: none; float: none; font-size: 0; height: 0; line-height: 0; max-height: 0; mso-hide: all; overflow: hidden; table-layout: fixed; visibility: hidden; width: 0;}</style> <style type=\"text/css\">a:link{color: #404F5E; text-decoration: none}</style> </head> <body bgcolor=\"#082c4e\" text=\"#3E3E3E\" link=\"#404F5E\" yahoo=\"fix\" style=\"background-color: #082c4e;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" class=\"nl2go-body-table\" width=\"100%\" style=\"background-color: #082c4e; width: 100%;\"> <tr> <td align=\"\" class=\"r0-c\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r2-i\" style=\"background-color: #082c4e;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r3-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"800\" class=\"r4-o\" style=\"table-layout: fixed; width: 800px;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"40\" style=\"font-size: 40px; line-height: 40px;\">\u00AD</td> </tr> <tr> <td class=\"r5-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"100%\" valign=\"top\" class=\"r6-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r8-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" height=\"70\" style=\"border-style: solid !important; margin: 0 auto 0 auto !important;table-layout: fixed; height: 70px;width:unset\"> <tbody> <tr> <td class=\"\" style=\"font-size: 0px; line-height: 0px;\"> <a href=\"https://finocio.com\"> <img src=\"https://finocio.com/wp-content/uploads/2020/01/LOGO_Y_TEXTO_FINOCIO_BLANCO.png\" height=\"70\" width=\"220\" border=\"0\" class=\"\" style=\"display: block;\"> </a> </td> </tr> </tbody> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> </tr> <tr class=\"nl2go-responsive-hide\"> <td height=\"30\" style=\"font-size: 30px; line-height: 30px;\">\u00AD</td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </td> </tr> <tr> <td align=\"center\" class=\"r3-c\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"800\" class=\"r4-o\" style=\"table-layout: fixed; width: 800px;\"> <tr> <td valign=\"top\" class=\"r2-i\" style=\"background-color: #082c4e;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"20\" width=\"20\" style=\"font-size: 20px; line-height: 20px; background-color: #ffffff;\">\u00AD </td> <td height=\"20\" style=\"font-size: 20px; line-height: 20px; background-color: #ffffff;\">\u00AD</td> <td height=\"20\" width=\"20\" style=\"font-size: 20px; line-height: 20px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r12-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"100%\" valign=\"top\" class=\"r6-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r15-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div>  <h1 class=\"default-heading1\" style=\"margin: 0; color: #3e3e3e; font-family: Quicksand, Helvetica, Arial, sans-serif; font-size: 26px; font-weight: 700; letter-spacing: 0.1em;word-break:keep-all;\">Licencia [planId] en ATM [machine] activada en PERIODO DE PRUEBA</h1> </div> </td> </tr> </table> </td> </tr> <tr> <td class=\"r16-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"800\" class=\"r11-o\" style=\"table-layout: fixed;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"15\" style=\"font-size: 15px; line-height: 15px;\">\u00AD</td> </tr> <tr> <td class=\"r17-i\" style=\"height: 1px;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" valign=\"\" class=\"r17-i\" height=\"1\" style=\"border-top-style: solid; background-clip: border-box; border-top-color: #181c20; border-top-width: 1px; font-size: 1px; line-height: 1px;\"> <tr> <td height=\"0\" style=\"font-size: 0px; line-height: 0px;\">\u00AD</td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> <td height=\"25\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD</td> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r18-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"100%\" valign=\"top\" class=\"r6-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r15-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <p style=\"margin: 0;\">Hola, [user]<br> <br>Tu licencia con identificador: [licenseId] y código corto: [licenseCode] asociada al ATM: [machine] se ha activado en modo PERIODO DE PRUEBA.<br> <br>El período de prueba dura [licenseFreeTrialDuration], podras hacer uso de todas las capacidades del ATM según la configuración de tu servidor.<br> <br>Tienes [licenseFreeTrialDuration] para seleccionar el plan de tu licencia con el período de facturación que más te convenga.<br> <br>Información de tu plan:</p> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"15\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td height=\"15\" style=\"font-size: 15px; line-height: 15px; background-color: #ffffff;\">\u00AD</td> <td height=\"15\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r19-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"8.33%\" valign=\"top\" class=\"r20-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r21-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"9\" class=\"r22-o\" style=\"table-layout: fixed; width: 9px;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"11\" style=\"font-size: 11px; line-height: 11px;\">\u00AD</td> </tr> <tr> <td class=\"r23-i\" style=\"font-size: 0px; line-height: 0px;\"> <img src=\"https://img.mailinblue.com/2670624/images/rnb/original/5f03261f9f4f23cb4662389c.png\" width=\"9\" border=\"0\" class=\"\" style=\"display: block; width: 100%;\"> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> <th width=\"91.67%\" valign=\"top\" class=\"r24-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r25-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <p style=\"margin: 0;\"> <strong>Plan:</strong> [planId]</p> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"10\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td height=\"10\" style=\"font-size: 10px; line-height: 10px; background-color: #ffffff;\">\u00AD</td> <td height=\"10\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r26-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"8.33%\" valign=\"top\" class=\"r20-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r21-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"9\" class=\"r22-o\" style=\"table-layout: fixed; width: 9px;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"11\" style=\"font-size: 11px; line-height: 11px;\">\u00AD</td> </tr> <tr> <td class=\"r23-i\" style=\"font-size: 0px; line-height: 0px;\"> <img src=\"https://img.mailinblue.com/2670624/images/rnb/original/5f03261f9f4f23cb4662389c.png\" width=\"9\" border=\"0\" class=\"\" style=\"display: block; width: 100%;\"> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> <th width=\"91.67%\" valign=\"top\" class=\"r24-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r25-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <p style=\"margin: 0;\"> <strong>Fecha de activación:</strong> [planActivation]</p> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"10\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td height=\"10\" style=\"font-size: 10px; line-height: 10px; background-color: #ffffff;\">\u00AD</td> <td height=\"10\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r26-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"8.33%\" valign=\"top\" class=\"r20-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r21-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"9\" class=\"r22-o\" style=\"table-layout: fixed; width: 9px;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"11\" style=\"font-size: 11px; line-height: 11px;\">\u00AD</td> </tr> <tr> <td class=\"r23-i\" style=\"font-size: 0px; line-height: 0px;\"> <img src=\"https://img.mailinblue.com/2670624/images/rnb/original/5f03261f9f4f23cb4662389c.png\" width=\"9\" border=\"0\" class=\"\" style=\"display: block; width: 100%;\"> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> <th width=\"91.67%\" valign=\"top\" class=\"r24-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r25-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <p style=\"margin: 0;\"> <strong>Fecha finalización:</strong> [planExpiry]</p> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> <td height=\"25\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD</td> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r18-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"100%\" valign=\"top\" class=\"r6-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r15-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <p style=\"margin: 0;\">Accede al dashboard de administración de tus ATMs en <a href=\"http://dashboard.finocio.com\" style=\"color: #404F5E; text-decoration: none;\"> <span style=\"color: #3e3e3e;\"> <u>dashboard.finocio.com</u> </span> </a> en el apartado de cuenta/licencias encontraras toda la información y estado de tus licencias.<br> <br>Cualquier duda puedes contactar con el departamento de soporte al correo <span style=\"color: #3e3e3e;\"> <strong>support@finansoportesconsulting.es</strong> </span>, estamos para ayudarte.</p> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> <tr> <td class=\"r10-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r11-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> <td height=\"25\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD</td> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> <td class=\"r27-i\" style=\"background-color: #ffffff;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"100%\" valign=\"top\" class=\"r6-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"left\" valign=\"top\" class=\"r15-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <span>Atentamente,</span> </div> </td> </tr> </table> </td> </tr> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"11\" style=\"font-size: 11px; line-height: 11px;\">\u00AD</td> </tr> <tr> <td align=\"left\" valign=\"top\" class=\"r29-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: left;\"> <div> <span>El equipo de soporte de <strong>FINOCIO</strong> </span> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px; background-color: #ffffff;\">\u00AD </td> </tr> <tr class=\"nl2go-responsive-hide\"> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> <td height=\"25\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD</td> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px; background-color: #ffffff;\">\u00AD </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </td> </tr> <tr> <td align=\"\" class=\"r0-c\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r2-i\" style=\"background-color: #082c4e;\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r3-c\" align=\"center\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"600\" class=\"r4-o\" style=\"table-layout: fixed; width: 600px;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px;\">\u00AD </td> <td height=\"25\" style=\"font-size: 25px; line-height: 25px;\">\u00AD</td> <td height=\"25\" width=\"20\" style=\"font-size: 25px; line-height: 25px;\">\u00AD </td> </tr> <tr> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px;\">\u00AD </td> <td class=\"r30-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <th width=\"100%\" valign=\"top\" class=\"r6-c\" style=\"font-weight: normal;\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r1-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td valign=\"top\" class=\"r7-i\"> <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\"> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr> <td align=\"center\" valign=\"top\" class=\"r31-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: center;\"> <div> <div class=\"sib_class_18_white_quicksand_m_up\" style=\"color: #FFFFFF; font-family: Quicksand, Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase;\">FINOCIO - FINANSOPORTES CONSULTING S.L.</div> </div> </td> </tr> </table> </td> </tr> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"30\" style=\"font-size: 30px; line-height: 30px;\">\u00AD</td> </tr> <tr> <td align=\"center\" valign=\"top\" class=\"r36-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: center;\"> <div> <div class=\"sib_class_18_white_reg\" style=\"color: #FFFFFF; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 18px;\">Calle Fuenlabrada 9, Madrid, 28019 , España<br> <a href=\"http://finocio.com\" style=\"color: #404F5E; text-decoration: none;\"> <span style=\"color: #ffffff;\"> <u>finocio.com</u> </span> </a> <br> <span style=\"color: #ffffff;\">info@finansoportesconsulting.es</span> <br> </div> </div> </td> </tr> </table> </td> </tr> <tr> <td class=\"r13-c\" align=\"left\"> <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" role=\"presentation\" width=\"100%\" class=\"r14-o\" style=\"table-layout: fixed; width: 100%;\"> <tr class=\"nl2go-responsive-hide\"> <td height=\"30\" style=\"font-size: 30px; line-height: 30px;\">\u00AD</td> </tr> <tr> <td align=\"center\" valign=\"top\" class=\"r36-i nl2go-default-textstyle\" style=\"color: #3E3E3E; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.45; text-align: center;\"> <div> <div class=\"sib_class_16_white_reg_u\" style=\"color: #FFFFFF; font-family: Montserrat, Helvetica, Arial, sans-serif; font-size: 12px; text-decoration: none;\"> <span style=\"color: #ffffff;\">Correo generado automáticamente - no responder</span> </div> </div> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </th> </tr> </table> </td> <td class=\"nl2go-responsive-hide\" width=\"20\" style=\"font-size: 0px; line-height: 1px;\">\u00AD </td> </tr> <tr class=\"nl2go-responsive-hide\"> <td height=\"30\" width=\"20\" style=\"font-size: 30px; line-height: 30px;\">\u00AD </td> <td height=\"30\" style=\"font-size: 30px; line-height: 30px;\">\u00AD</td> <td height=\"30\" width=\"20\" style=\"font-size: 30px; line-height: 30px;\">\u00AD </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </body> </html>";

        return "msg";
    }

    @Async
    public void sendEmail(String to, String subject, String text) {


        MimeMessage message = mailSender.createMimeMessage();
        MimeMessageHelper helper;
        try {
            helper = new MimeMessageHelper(message, true, "UTF-8");
            helper.setFrom("coli969696@gmail.com");
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(text);
            //helper.setText(licenseTrialPeriodActiveEmail(), true); // true indica que el texto es HTML

/*
            File pdfFile = new File("C:/Users/Usuario/Desktop/Carta_Adrian.pdf");
            helper.addAttachment(pdfFile.getName(), pdfFile);
*/

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }

        mailSender.send(message);

    }






}
